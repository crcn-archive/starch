var handlebars = require("handlebars");

function fileTemplate() {
	return "\"{{{body}}}\";";
}

exports.register = function(files, template, bundle) {
	if(arguments.length == 2) {
		bundle = template;
		template =fileTemplate;
	}

	template = handlebars.compile(template());


	files.forEach(function(file) {
		bundle.register("." + file, function(body, file) {
			return "module.exports = " + template({ body: body.replace(/\"/g,"\\\"").replace(/\n/g,"\\\n") });
		});	
	})
}